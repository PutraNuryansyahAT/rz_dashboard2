@extends('layout.header')

@section('maincontent')

<main class="h-full pb-16 overflow-y-auto">
    <div class="container px-6 mx-auto grid">
        <h2 class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200">
            Pengaturan Akun
        </h2>
        <!-- CTA -->

        <div class="flex items-center justify-between p-4 mb-8 text-sm font-semibold text-purple-100 bg-gray-800 rounded-lg shadow-md focus:outline-none focus:shadow-outline-purple">

            <span>Tanggal Registrasi | {{$Data_amil->date_created }}</span>

        </div>
        <!-- General elements -->
        <form action="/update" method="post" enctype="multipart/form-data">
            @method('put')
            @csrf
            <div class="px-4 py-3 mb-8 bg-white rounded-lg shadow-md ">
                @if (session()->has('success'))
                <div class="bg-blue-100 border-t border-b border-blue-500 text-blue-700 px-4 py-3" role="alert">
                    <p class="font-bold">{{ session('success') }}</p>
                </div>
                <br>
                @endif

                <label class="block text-sm">
                    <span class="inputnamesetting">No KTP</span>
                    <input class="block w-full mt-1 text-sm form-input bg-gray-400" placeholder="Name" name="no_ktp" value="{{ old('no_ktp' , $Data_amil->no_ktp)}}" disabled />
                </label>

                <label class="label">
                    <span class="inputnamesetting">Nama Lengkap</span>
                    <input class="block w-full mt-1 text-sm form-input " placeholder="Name" name="nama_lengkap" value="{{ old('nama_lengkap' , $Data_amil->nama_lengkap)}}" />
                </label>
                @error('nama_lengkap')
                <p class="text-red-500 text-xs italic -mt-3">{{ $message }}</p>

                @enderror
                <label class="label">
                    <span class="inputnamesetting">Alamat Domisili</span>
                    <textarea class="block w-full mt-1 text-sm form-textarea " rows="3" placeholder="Alamat" name="alamat">{{ old('alamat' , $Data_amil->alamat ) }}</textarea>
                </label>
                @error('alamat')
                <p class="text-red-500 text-xs italic -mt-3">{{ $message }}</p>

                @enderror

                <label class="label">
                    <span class="inputnamesetting ">Email</span>
                    <input class="block w-full mt-1 text-sm form-input" placeholder="Email" name="email" value="{{ old('email' , $Data_amil->email)}}" />
                </label>
                @error('email')
                <p class="text-red-500 text-xs italic -mt-3">{{ $message }}</p>

                @enderror

                <label class="label">
                    <span class="inputnamesetting">Hp</span>
                    <input class="block w-full mt-1 text-sm focus:outline-none focus:shadow-outline-purple form-input" placeholder="+62" value="{{ old('nomorhp' ,  $Data_amil->nomor_hp)}}" name="nomor_hp" />
                </label>
                @error('nomor_hp')
                <p class="text-red-500 text-xs italic -mt-3">{{ $message }}</p>

                @enderror

                <label class="label">
                    <span class="inputnamesetting">Cabang Rumah Zakat Terdekat</span>
                    <input class="block w-full mt-1 text-sm form-input" placeholder="Cabang Rumah Zakat Terdekat" value="{{ old('cabang' , $Data_amil->cabang_rumahzakat)}}" name="cabang_rumahzakat" disabled />
                </label>
                @error('cabang_rumahzakat')
                <p class="text-red-500 text-xs italic -mt-3">{{ $message }}</p>

                @enderror

                <!-- Data Rekening -->
                <h2 class="mt-12  mb-4 text-2xl font-semibold text-gray-700 dark:text-gray-200">
                    Data Rekening Bank
                </h2>

                <label class="label">
                    <span class="inputnamesetting">Nama Bank</span>
                    <input class="block w-full mt-1 text-sm  form-input" placeholder="Nama Bank" name="nama_bank" value="{{ old('nama_bank' , $Data_amil->nama_bank)}}" />
                </label>

                <label class="label">
                    <span class="inputnamesetting">No Rekening</span>
                    <input class="block w-full mt-1 text-sm  form-input" placeholder="No Rekening" name="no_rekening" value="{{ old('no_rekening' , $Data_amil->no_rekening )}}" />
                </label>

                <label class="label">
                    <span class="inputnamesetting">Atas Nama</span>
                    <input class="block w-full mt-1 text-sm  form-input" class="block w-full mt-1 text-sm  form-input" placeholder="Atas Nama" name="atas_nama" value="{{ old('atas_nama' , $Data_amil->atas_nama)}}" />
                </label>

                <h1 class="mt-6  mb-4 text-xl font-semibold text-gray-700 ">
                    Upload Berkas
                </h1>
                <label class="block mb-2 text-sm font-medium text-gray-900 ">Surat Pernyataan</label>
                <input id="file_surat_pernyataan" type="file" name="surat_pernyataan" class="w-full">
                <a href="{{ $Data_amil->surat_pernyataan }}" class="bg-orange-500 hover:bg-orange-1 text-gray-100 font-semibold hover:text-white py-2 px-5 border border-orange-200 hover:border-transparent rounded"> Lihat Gambar Sebelumnya</a>

                <div class="col-md-12 mb-2">
                    @error('surat_pernyataan')
                    <p class="text-red-500 text-xs italic -mt-3">{{ $message }}</p>
                    @enderror
                    <!-- <img src="{{ asset('storage/'.$Data_amil->surat_pernyataan) }}" width="150"> -->
                    <img id="preview-surat_pernyataan-before-upload" style="max-height: 250px;">
                </div>

                <label class="block mb-2 mt-4 text-sm font-medium text-gray-900 " for="file_input">KTP </label>
                <input id="file_ktp" type="file" name="ktp" class="w-full">
                <a href="{{ $Data_amil->ktp }}" class="bg-orange-500 hover:bg-orange-1 text-gray-100 font-semibold hover:text-white py-2 px-5 border border-orange-200 hover:border-transparent rounded"> Lihat Gambar Sebelumnya</a>
                <div class="col-md-12 mb-2">
                    @error('ktp')
                    <p class="text-red-500 text-xs italic -mt-3">{{ $message}}</p>
                    @enderror
                    <img id="preview-ktp-before-upload" style="max-height: 250px;">
                </div>
                <br>
                <div class=" flex justify-center">
                    <button type="submit " class=" bg-orange-500 hover:bg-orange-1 text-gray-100 font-semibold hover:text-white py-2 px-5 border border-orange-200 hover:border-transparent rounded">
                        Update
                    </button>
                </div>
            </div>
        </form>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(e) {
                $('#file_ktp').change(function() {

                    let reader = new FileReader();

                    reader.onload = (e) => {

                        $('#preview-ktp-before-upload').attr('src', e.target.result);
                    }

                    reader.readAsDataURL(this.files[0]);

                });
                $('#file_surat_pernyataan').change(function() {

                    let reader = new FileReader();

                    reader.onload = (e) => {

                        $('#preview-surat_pernyataan-before-upload').attr('src', e.target.result);
                    }

                    reader.readAsDataURL(this.files[0]);

                });


            });
        </script>
    </div>
</main>
@endsection